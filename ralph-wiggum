#!/usr/bin/env bash
# ralph-wiggum: "I'm helping!"
set -e

# Wipe progress.txt at start
> progress.txt

echo "=== Starting ralph-wiggum ==="

result=$(claude --dangerously-skip-permissions -p "$(cat prompt.md)" 2>&1 | tee /dev/stderr)

echo ""
echo "=== End ==="

if [[ "$result" == *"<promise>COMPLETE</promise>"* ]]; then
  echo "PRD complete!"
  exit 0
fi
